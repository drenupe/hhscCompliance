{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///external commonjs \"tslib\"","webpack:///external commonjs \"@nestjs/common\"","webpack:///external commonjs \"@nestjs/core\"","webpack:///external commonjs \"@nestjs/swagger\"","webpack:///external commonjs \"helmet\"","webpack:///external commonjs \"compression\"","webpack:///external commonjs \"cookie-parser\"","webpack:///./src/app/app.module.ts","webpack:///external commonjs \"@nestjs/config\"","webpack:///external commonjs \"@nestjs/typeorm\"","webpack:///external node-commonjs \"node:path\"","webpack:///./src/configuration/configuration.ts","webpack:///./src/configuration/typeorm/async.config.ts","webpack:///external node-commonjs \"node:fs\"","webpack:///./src/app/app.controller.ts","webpack:///./src/app/app.service.ts","webpack:///external commonjs \"typeorm\"","webpack:///./src/app/auth/auth.module.ts","webpack:///./src/app/auth/auth.service.ts","webpack:///./src/app/auth/auth.controller.ts","webpack:///./src/app/auth/dto/create-auth.dto.ts","webpack:///./src/app/auth/dto/update-auth.dto.ts","webpack:///./src/app/raci/raci.module.ts","webpack:///./src/app/raci/raci.entities.ts","webpack:///./src/app/raci/raci.service.ts","webpack:///../libs/shared-models/src/index.ts","webpack:///../libs/shared-models/src/lib/auth/roles.ts","webpack:///../libs/shared-models/src/lib/raci.ts","webpack:///../libs/shared-models/src/lib/shared-models.ts","webpack:///../libs/shared-models/src/lib/ownership.ts","webpack:///../libs/shared-models/src/lib/nav/role-menu.ts","webpack:///../libs/shared-models/src/lib/iss/iss.models.ts","webpack:///./src/app/raci/raci.controller.ts","webpack:///./src/app/common/middleware/request-id.middleware.ts","webpack:///external node-commonjs \"node:crypto\"","webpack:///./src/app/iss/iss.module.ts","webpack:///./src/app/iss/entities/iss-provider.entity.ts","webpack:///./src/app/iss/entities/iss-staff-log.entity.ts","webpack:///./src/app/consumers/entities/consumer.entity.ts","webpack:///./src/app/iss/iss.service.ts","webpack:///./src/app/consumers/consumers.service.ts","webpack:///./src/app/iss/iss.controller.ts","webpack:///./src/app/iss/dto/create-iss-provider.dto.ts","webpack:///external commonjs \"class-validator\"","webpack:///./src/app/iss/dto/create-iss-staff-log.dto.ts","webpack:///./src/app/iss/dto/update-iss-staff-log.dto.ts","webpack:///external commonjs \"@nestjs/mapped-types\"","webpack:///./src/app/consumers/dto/create-consumer.dto.ts","webpack:///./src/app/consumers/consumers.module.ts","webpack:///./src/app/consumers/consumers.controller.ts","webpack:///./src/app/consumers/dto/update-consumer.dto.ts","webpack:///webpack/bootstrap","webpack:///./src/main.ts"],"sourcesContent":["module.exports = require(\"tslib\");","module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/core\");","module.exports = require(\"@nestjs/swagger\");","module.exports = require(\"helmet\");","module.exports = require(\"compression\");","module.exports = require(\"cookie-parser\");","// api/src/app/app.module.ts\r\nimport { MiddlewareConsumer, Module } from '@nestjs/common';\r\nimport { ConfigModule } from '@nestjs/config';\r\nimport { TypeOrmModule } from '@nestjs/typeorm';\r\nimport { join } from 'node:path';\r\n\r\nimport { configuration } from '../configuration/configuration';\r\nimport { typeOrmAsyncConfig } from '../configuration/typeorm/async.config';\r\n\r\nimport { AppController } from './app.controller';\r\nimport { AppService } from './app.service';\r\n\r\n// Feature modules\r\nimport { AuthModule } from './auth/auth.module';\r\nimport { RaciModule } from './raci/raci.module';\r\n// import { UsersModule } from './users/users.module';\r\n// import { MetricsModule } from './observability/metrics/metrics.module';\r\nimport { RequestIdMiddleware } from './common/middleware/request-id.middleware';\r\nimport { IssModule } from './iss/iss.module';\r\nimport { ConsumersModule } from './consumers/consumers.module';\r\n// import { APP_FILTER, APP_INTERCEPTOR } from '@nestjs/core';\r\n// import { HttpErrorFilter } from './common/filters/http-exception.filter';\r\n// import { HttpLoggingInterceptor } from './common/interceptors/http-logging.interceptor';\r\n// import { MetricsInterceptor } from './observability/metrics/metrics.interceptor';\r\n\r\n@Module({\r\n  imports: [\r\n    ConfigModule.forRoot({\r\n      isGlobal: true,\r\n      load: [configuration],                  //  use your zod-based config\r\n      envFilePath: [\r\n        // app-specific first\r\n        join(process.cwd(), `api/.env.${process.env.NODE_ENV}.local`),\r\n        join(process.cwd(), `api/.env.${process.env.NODE_ENV}`),\r\n        join(process.cwd(), 'api/.env'),\r\n        // common fallbacks\r\n        `.env.${process.env.NODE_ENV}.local`,\r\n        `.env.${process.env.NODE_ENV}`,\r\n        '.env',\r\n      ],\r\n    }),\r\n\r\n    //  DB connection (uses `configuration()` + async.config)\r\n    TypeOrmModule.forRootAsync(typeOrmAsyncConfig),\r\n\r\n    // feature modules\r\n    AuthModule,\r\n    RaciModule,\r\n    IssModule,\r\n    ConsumersModule\r\n    // UsersModule,\r\n    // MetricsModule,\r\n  ],\r\n  controllers: [AppController],\r\n  providers: [\r\n    AppService,\r\n    // { provide: APP_INTERCEPTOR, useClass: MetricsInterceptor },\r\n    // { provide: APP_FILTER, useClass: HttpErrorFilter },\r\n    // { provide: APP_INTERCEPTOR, useClass: HttpLoggingInterceptor },\r\n  ],\r\n})\r\nexport class AppModule {\r\n  configure(consumer: MiddlewareConsumer) {\r\n    consumer.apply(RequestIdMiddleware).forRoutes('*');\r\n  }\r\n}\r\n","module.exports = require(\"@nestjs/config\");","module.exports = require(\"@nestjs/typeorm\");","module.exports = require(\"node:path\");","// api/src/configuration/configuration.ts\r\n// Simple, Zod-free config for local dev.\r\n// You can reintroduce strict Zod checks later for staging/prod.\r\n\r\nexport type AppConfig = ReturnType<typeof configuration>;\r\n\r\nexport const configuration = () => {\r\n  const rawNodeEnv = (process.env.NODE_ENV ?? '').trim();\r\n  const env = rawNodeEnv || 'development';\r\n\r\n  const rawPort = Number(process.env.PORT ?? 3000);\r\n  const port = Number.isNaN(rawPort) ? 3000 : rawPort;\r\n\r\n  const apiPrefix = process.env.API_PREFIX || 'api';\r\n\r\n  const corsOrigins = (process.env.CORS_ORIGIN ?? '')\r\n    .split(',')\r\n    .map((s) => s.trim())\r\n    .filter(Boolean);\r\n\r\n  const databaseUrl = process.env.DATABASE_URL ?? '';\r\n\r\n  const sslFromUrl = /[?&]sslmode=require/i.test(databaseUrl);\r\n  const dbSslFlag = String(process.env.DB_SSL ?? '').toLowerCase() === 'true';\r\n  const databaseSsl = dbSslFlag || sslFromUrl;\r\n\r\n  const pgCaCert = process.env.PG_CA_CERT;\r\n\r\n  const accessTtl = process.env.JWT_EXPIRES_IN || '15m';\r\n  const rawRefreshDays = Number(process.env.REFRESH_TTL_DAYS ?? 7);\r\n  const refreshDays = Number.isNaN(rawRefreshDays) ? 7 : rawRefreshDays;\r\n  const refreshTtl = `${refreshDays}d`;\r\n\r\n  const jwtSecret =\r\n    process.env.JWT_SECRET || 'dev_jwt_secret_change_me_in_real_envs';\r\n  const jwtRefreshSecret =\r\n    process.env.JWT_REFRESH_SECRET || jwtSecret;\r\n\r\n  return {\r\n    env,\r\n    port,\r\n    apiPrefix,\r\n    cors: {\r\n      origins: corsOrigins,\r\n    },\r\n    database: {\r\n      url: databaseUrl,\r\n      ssl: databaseSsl,\r\n      caCert: pgCaCert,\r\n    },\r\n    auth: {\r\n      jwtSecret,\r\n      jwtRefreshSecret,\r\n      accessTtl,\r\n      refreshTtl,\r\n    },\r\n  } as const;\r\n};\r\n","// apps/api/src/config/typeorm/async.config.ts\r\nimport { TypeOrmModuleAsyncOptions, TypeOrmModuleOptions } from '@nestjs/typeorm';\r\nimport { ConfigService } from '@nestjs/config';\r\nimport { existsSync, readFileSync } from 'node:fs';\r\nimport { resolve } from 'node:path';\r\nimport { TlsOptions } from 'node:tls';\r\n\r\nexport const typeOrmAsyncConfig: TypeOrmModuleAsyncOptions = {\r\n  inject: [ConfigService],\r\n  useFactory: async (cfg: ConfigService): Promise<TypeOrmModuleOptions> => {\r\n    const nodeEnv = String(\r\n      cfg.get('env') ?? cfg.get('NODE_ENV') ?? 'development',\r\n    ).toLowerCase();\r\n\r\n    const url =\r\n      cfg.get<string>('database.url') ??\r\n      cfg.get<string>('DATABASE_URL') ??\r\n      '';\r\n\r\n    const useUrl = url.length > 0;\r\n\r\n    // SSL toggle from config/env or sslmode=require in the URL\r\n    const dbSslFlag =\r\n      (cfg.get<boolean>('database.ssl') as boolean | undefined) ??\r\n      /^true$/i.test(String(cfg.get('DB_SSL') ?? ''));\r\n    const sslFromUrl = /[?&]sslmode=require/i.test(url);\r\n    const sslOn = Boolean(dbSslFlag || sslFromUrl);\r\n\r\n    // CA: inline or file path\r\n    const caInline =\r\n      cfg.get<string>('database.caCert') ??\r\n      cfg.get<string>('PG_CA_CERT');\r\n    const caPath =\r\n      cfg.get<string>('database.caCertPath') ??\r\n      cfg.get<string>('PG_CA_CERT_PATH');\r\n\r\n    let caPem: string | undefined;\r\n    if (caInline) {\r\n      caPem = caInline.replace(/\\\\n/g, '\\n').trim();\r\n    } else if (caPath && existsSync(caPath)) {\r\n      caPem = readFileSync(caPath, 'utf8');\r\n    }\r\n\r\n    const sslConfig: boolean | TlsOptions = sslOn\r\n      ? caPem\r\n        ? { rejectUnauthorized: true, ca: caPem }\r\n        : { rejectUnauthorized: false }\r\n      : false;\r\n\r\n    const base: TypeOrmModuleOptions = {\r\n      type: 'postgres',\r\n      autoLoadEntities: true,\r\n\r\n      //  Important: use migrations only (no runtime schema sync)\r\n      synchronize: false,\r\n\r\n      ssl: sslConfig,\r\n      extra: {\r\n        ...(sslOn ? { ssl: sslConfig } : {}),\r\n        keepAlive: true,\r\n        connectionTimeoutMillis: 10_000,\r\n        statement_timeout: 30_000,\r\n        query_timeout: 30_000,\r\n      },\r\n\r\n      // For programmatic migration runs (if you ever call dataSource.runMigrations())\r\n      migrations: [resolve(process.cwd(), 'dist/api/migrations/*.js')],\r\n    };\r\n\r\n    const discrete = {\r\n      host: cfg.get('database.host') ?? cfg.get('DB_HOST') ?? 'localhost',\r\n      port: parseInt(\r\n        String(cfg.get('database.port') ?? cfg.get('DB_PORT') ?? '5432'),\r\n        10,\r\n      ),\r\n      username: cfg.get('database.user') ?? cfg.get('DB_USER') ?? 'postgres',\r\n      password: cfg.get('database.pass') ?? cfg.get('DB_PASS') ?? 'postgres',\r\n      database: cfg.get('database.name') ?? cfg.get('DB_NAME') ?? 'postgres',\r\n    };\r\n\r\n    return {\r\n      ...base,\r\n      ...(useUrl ? { url } : discrete),\r\n    };\r\n  },\r\n};\r\n","module.exports = require(\"node:fs\");","// api/src/app/app.controller.ts\r\nimport { Controller, Get } from '@nestjs/common';\r\nimport { AppService } from './app.service';\r\n\r\n@Controller()\r\nexport class AppController {\r\n  constructor(private readonly appService: AppService) {}\r\n\r\n  // GET /api/v1\r\n  @Get()\r\n  getRoot() {\r\n    return this.appService.root();\r\n  }\r\n\r\n  // GET /api/v1/health\r\n  @Get('health')\r\n  getHealth() {\r\n    return this.appService.health();\r\n  }\r\n}\r\n","// api/src/app/app.service.ts\r\nimport { Injectable } from '@nestjs/common';\r\nimport { DataSource } from 'typeorm';\r\n\r\n@Injectable()\r\nexport class AppService {\r\n  constructor(private readonly dataSource: DataSource) {}\r\n\r\n  async root() {\r\n    return {\r\n      status: 'ok',\r\n      message: 'HHSC Compliance API live',\r\n    };\r\n  }\r\n\r\n  async health() {\r\n    try {\r\n      // simple DB ping\r\n      await this.dataSource.query('SELECT 1');\r\n      return {\r\n        status: 'ok',\r\n        db: 'up',\r\n      };\r\n    } catch (e) {\r\n      return {\r\n        status: 'degraded',\r\n        db: 'down',\r\n        error: (e as Error).message,\r\n      };\r\n    }\r\n  }\r\n}\r\n","module.exports = require(\"typeorm\");","import { Module } from '@nestjs/common';\r\nimport { AuthService } from './auth.service';\r\nimport { AuthController } from './auth.controller';\r\n\r\n@Module({\r\n  controllers: [AuthController],\r\n  providers: [AuthService],\r\n})\r\nexport class AuthModule {}\r\n","import { Injectable } from '@nestjs/common';\r\nimport { CreateAuthDto } from './dto/create-auth.dto';\r\nimport { UpdateAuthDto } from './dto/update-auth.dto';\r\n\r\n@Injectable()\r\nexport class AuthService {\r\n  create(createAuthDto: CreateAuthDto) {\r\n    return 'This action adds a new auth';\r\n  }\r\n\r\n  findAll() {\r\n    return `This action returns all auth`;\r\n  }\r\n\r\n  findOne(id: number) {\r\n    return `This action returns a #${id} auth`;\r\n  }\r\n\r\n  update(id: number, updateAuthDto: UpdateAuthDto) {\r\n    return `This action updates a #${id} auth`;\r\n  }\r\n\r\n  remove(id: number) {\r\n    return `This action removes a #${id} auth`;\r\n  }\r\n}\r\n","import { Controller, Get, Post, Body, Patch, Param, Delete } from '@nestjs/common';\r\nimport { AuthService } from './auth.service';\r\nimport { CreateAuthDto } from './dto/create-auth.dto';\r\nimport { UpdateAuthDto } from './dto/update-auth.dto';\r\n\r\n@Controller('auth')\r\nexport class AuthController {\r\n  constructor(private readonly authService: AuthService) {}\r\n\r\n  @Post()\r\n  create(@Body() createAuthDto: CreateAuthDto) {\r\n    return this.authService.create(createAuthDto);\r\n  }\r\n\r\n  @Get()\r\n  findAll() {\r\n    return this.authService.findAll();\r\n  }\r\n\r\n  @Get(':id')\r\n  findOne(@Param('id') id: string) {\r\n    return this.authService.findOne(+id);\r\n  }\r\n\r\n  @Patch(':id')\r\n  update(@Param('id') id: string, @Body() updateAuthDto: UpdateAuthDto) {\r\n    return this.authService.update(+id, updateAuthDto);\r\n  }\r\n\r\n  @Delete(':id')\r\n  remove(@Param('id') id: string) {\r\n    return this.authService.remove(+id);\r\n  }\r\n}\r\n","export class CreateAuthDto {}\r\n","import { PartialType } from '@nestjs/swagger';\r\nimport { CreateAuthDto } from './create-auth.dto';\r\n\r\nexport class UpdateAuthDto extends PartialType(CreateAuthDto) {}\r\n","import { Module } from '@nestjs/common';\r\nimport { TypeOrmModule } from '@nestjs/typeorm';\r\nimport { ModuleCatalog, RaciAssignment, RoleCatalog } from './raci.entities';\r\nimport { RaciService } from './raci.service';\r\nimport { RaciController } from './raci.controller';\r\n\r\n@Module({\r\n  imports: [TypeOrmModule.forFeature([RoleCatalog, ModuleCatalog, RaciAssignment])],\r\n  providers: [RaciService],\r\n  controllers: [RaciController],\r\n  exports: [RaciService],\r\n})\r\nexport class RaciModule {}\r\n","import { Column, Entity, Index, JoinColumn, ManyToOne, PrimaryGeneratedColumn, Unique } from 'typeorm';\r\nimport type { ModuleKey, AppRole } from '@hhsc-compliance/shared-models';\r\n\r\nexport type RaciLevel = 'R' | 'A' | 'C' | 'I';\r\n\r\n// Example lookups (adjust to your schema)\r\n@Entity('role_catalog')\r\n@Unique(['name'])\r\nexport class RoleCatalog {\r\n  @PrimaryGeneratedColumn('uuid') id!: string;\r\n  @Index() @Column({ type: 'text' }) name!: AppRole;\r\n}\r\n\r\n@Entity('module_catalog')\r\n@Unique(['key'])\r\nexport class ModuleCatalog {\r\n  @PrimaryGeneratedColumn('uuid') id!: string;\r\n  @Index() @Column({ type: 'text' }) key!: ModuleKey;\r\n  @Column({ type: 'text' }) label!: string;\r\n  @Column({ type: 'text' }) icon!: string;\r\n  @Column({ type: 'text' }) path!: string;\r\n}\r\n\r\n@Entity('raci_assignment')\r\n@Unique(['moduleId', 'roleId', 'level'])\r\nexport class RaciAssignment {\r\n  @PrimaryGeneratedColumn('uuid') id!: string;\r\n\r\n  @ManyToOne(() => ModuleCatalog, { eager: true })\r\n  @JoinColumn({ name: 'moduleId' })\r\n  module!: ModuleCatalog;\r\n\r\n  @ManyToOne(() => RoleCatalog, { eager: true })\r\n  @JoinColumn({ name: 'roleId' })\r\n  role!: RoleCatalog;\r\n\r\n  @Index() @Column({ type: 'uuid' }) moduleId!: string;\r\n  @Index() @Column({ type: 'uuid' }) roleId!: string;\r\n\r\n  @Column({ type: 'text' }) level!: RaciLevel; // R/A/C/I\r\n}\r\n","/* eslint-disable @nx/enforce-module-boundaries */\r\nimport { Injectable } from '@nestjs/common';\r\nimport { InjectRepository } from '@nestjs/typeorm';\r\nimport { Repository } from 'typeorm';\r\n\r\nimport type { ModuleKey, Raci, RaciRole } from '@hhsc-compliance/shared-models';\r\nimport { DEFAULT_RACI } from '@hhsc-compliance/shared-models';\r\nimport { ModuleCatalog, RaciAssignment, RoleCatalog } from './raci.entities';\r\n\r\n// Navigation types (allow \"dashboard\" + extra keys)\r\nexport type NavKey = ModuleKey | 'dashboard';\r\n\r\nexport interface NavItem {\r\n  key: NavKey;\r\n  label: string;\r\n  icon: string;\r\n  path: string;\r\n}\r\n\r\n/**\r\n * Extra nav keys that are NOT part of ModuleKey\r\n * but still appear in your sidebar/navigation.\r\n * These will NOT be walked by RACI (we only iterate ModuleKey).\r\n */\r\ntype ExtraNavKey =\r\n  | 'enclosed-beds'\r\n  | 'protective-devices'\r\n  | 'prohibitions'\r\n  | 'medical-nursing'\r\n  | 'medical-med-admin'\r\n  | 'staff'\r\n  | 'cost-report';\r\n\r\n@Injectable()\r\nexport class RaciService {\r\n  constructor(\r\n    @InjectRepository(ModuleCatalog)\r\n    private readonly modules: Repository<ModuleCatalog>,\r\n    @InjectRepository(RoleCatalog)\r\n    private readonly roles: Repository<RoleCatalog>,\r\n    @InjectRepository(RaciAssignment)\r\n    private readonly assignments: Repository<RaciAssignment>,\r\n  ) {}\r\n\r\n  /** In-memory fallback (use DB if youve seeded ModuleCatalog / RoleCatalog / Assignments) */\r\n  private getDefaultRaciFor(moduleKey: ModuleKey): Raci {\r\n    return DEFAULT_RACI[moduleKey];\r\n  }\r\n\r\n  /** Allowed roles for a module = union of r, a, c, i (coarse RaciRole buckets) */\r\n  async allowedRoles(moduleKey: ModuleKey): Promise<RaciRole[]> {\r\n    // DB path (if youve populated tables)\r\n    const mod = await this.modules.findOne({ where: { key: moduleKey } });\r\n    if (mod) {\r\n      const rows = await this.assignments.find({\r\n        where: { moduleId: mod.id },\r\n        relations: ['role'],\r\n      });\r\n\r\n      const by = (lvl: 'R' | 'A' | 'C' | 'I') =>\r\n        rows\r\n          .filter((r) => r.level === lvl)\r\n          .map((r) => r.role.name as RaciRole);\r\n\r\n      const all = [...by('R'), ...by('A'), ...by('C'), ...by('I')];\r\n      return Array.from(new Set(all));\r\n    }\r\n\r\n    // Fallback to in-memory default\r\n    const r = this.getDefaultRaciFor(moduleKey);\r\n    return Array.from(\r\n      new Set([\r\n        ...(r?.r ?? []),\r\n        ...(r?.a ?? []),\r\n        ...(r?.c ?? []),\r\n        ...(r?.i ?? []),\r\n      ]),\r\n    );\r\n  }\r\n\r\n  /** Build a simple nav list for a given coarse RaciRole bucket */\r\n  async buildMenuForRole(role: RaciRole): Promise<NavItem[]> {\r\n    // Map module -> nav display (adjust labels/icons/paths here)\r\n    const catalog: Record<ModuleKey, Omit<NavItem, 'key'>> &\r\n      Partial<Record<ExtraNavKey, Omit<NavItem, 'key'>>> = {\r\n      //  keys that ARE ModuleKey\r\n      residential: {\r\n        label: 'Residential',\r\n        icon: 'home',\r\n        path: '/compliance/residential',\r\n      },\r\n      programmatic: {\r\n        label: 'Programmatic',\r\n        icon: 'list-checks',\r\n        path: '/compliance/programmatic',\r\n      },\r\n      finance: {\r\n        label: 'Finance / Rent',\r\n        icon: 'wallet',\r\n        path: '/compliance/finance',\r\n      },\r\n      behavior: {\r\n        label: 'Behavior',\r\n        icon: 'activity',\r\n        path: '/compliance/behavior',\r\n      },\r\n      ane: {\r\n        label: 'Abuse/Neglect/ANE',\r\n        icon: 'shield-alert',\r\n        path: '/compliance/ane',\r\n      },\r\n      restraints: {\r\n        label: 'Restraints',\r\n        icon: 'hand',\r\n        path: '/compliance/restraints',\r\n      },\r\n      billing: {\r\n        label: 'Billing',\r\n        icon: 'file-text',\r\n        path: '/compliance/billing',\r\n      },\r\n      iss: {\r\n        label: 'ISS',\r\n        icon: 'users',\r\n        path: '/iss',\r\n      },\r\n      settings: {\r\n        label: 'Settings',\r\n        icon: 'settings',\r\n        path: '/settings',\r\n      },\r\n      raci: {\r\n        label: 'RACI Matrix',\r\n        icon: 'shield-check',\r\n        path: '/admin/raci',\r\n      },\r\n      dashboard: {\r\n        label: 'Dashboard',\r\n        icon: 'layout-dashboard',\r\n        path: '/dashboard',\r\n      },\r\n\r\n      //  extra nav-only keys (NOT part of ModuleKey)\r\n      'enclosed-beds': {\r\n        label: 'Enclosed Beds',\r\n        icon: 'bed',\r\n        path: '/compliance/enclosed-beds',\r\n      },\r\n      'protective-devices': {\r\n        label: 'Protective Devices',\r\n        icon: 'shield',\r\n        path: '/compliance/protective',\r\n      },\r\n      prohibitions: {\r\n        label: 'Prohibitions',\r\n        icon: 'ban',\r\n        path: '/compliance/prohibitions',\r\n      },\r\n      'medical-nursing': {\r\n        label: 'Nursing',\r\n        icon: 'stethoscope',\r\n        path: '/medical/nursing',\r\n      },\r\n      'medical-med-admin': {\r\n        label: 'Med Admin',\r\n        icon: 'pill',\r\n        path: '/medical/med-admin',\r\n      },\r\n      staff: {\r\n        label: 'Staff',\r\n        icon: 'user-cog',\r\n        path: '/staff',\r\n      },\r\n      'cost-report': {\r\n        label: 'Cost Report',\r\n        icon: 'file-spreadsheet',\r\n        path: '/admin/cost-report',\r\n      },\r\n    };\r\n\r\n    const items: NavItem[] = [];\r\n\r\n    // Only walk the RACI-aware modules\r\n    for (const key of Object.keys(DEFAULT_RACI) as ModuleKey[]) {\r\n      const allowed = await this.allowedRoles(key);\r\n      if (allowed.includes(role)) {\r\n        const d = catalog[key];\r\n        if (d) items.push({ key, ...d });\r\n      }\r\n    }\r\n\r\n    // Ensure Dashboard present (in case RACI somehow filtered all else)\r\n    if (!items.some((x) => x.key === 'dashboard')) {\r\n      const d = catalog.dashboard;\r\n      items.unshift({ key: 'dashboard', ...d });\r\n    }\r\n\r\n    return items;\r\n  }\r\n}\r\n","// libs/shared-models/src/index.ts\r\n\r\n// Canonical roles + role list\r\nexport * from './lib/auth/roles';\r\n\r\n// RACI primitives (ModuleKey, allowedRolesFor, etc.)\r\nexport * from './lib/raci';\r\n\r\n// Legacy / misc exports\r\nexport * from './lib/shared-models';\r\nexport * from './lib/ownership';\r\nexport * from './lib/nav/role-menu';\r\nexport * from './lib/iss/iss.models';","// libs/shared-models/src/lib/auth/roles.ts\r\n\r\n/**\r\n * Application-wide role identifiers (used in JWTs, ACL, etc.)\r\n * Keep these values consistent across API + Web.\r\n */\r\nexport type AppRole =\r\n  | 'Admin'\r\n  | 'CaseManager'\r\n  | 'Nurse'\r\n  | 'DirectCareStaff'\r\n  | 'ISSManager'\r\n  | 'ISSStaff'\r\n  | 'Finance'\r\n  | 'ProgramDirector'\r\n  | 'ComplianceOfficer'\r\n  | 'BehaviorSupportLead'\r\n  | 'FinanceOfficer'\r\n  | 'MedicalDirector';\r\n\r\nexport const ALL_ROLES: AppRole[] = [\r\n  'Admin',\r\n  'CaseManager',\r\n  'Nurse',\r\n  'DirectCareStaff',\r\n  'ISSManager',\r\n  'ISSStaff',\r\n  'Finance',\r\n  'ProgramDirector',\r\n  'ComplianceOfficer',\r\n  'BehaviorSupportLead',\r\n  'FinanceOfficer',\r\n  'MedicalDirector',\r\n];\r\n","// libs/shared-models/src/lib/raci.ts\r\n\r\n/** Coarse-grained RACI roles used for access buckets (API + web) */\r\nexport type RaciRole = 'OWNER' | 'ADMIN' | 'MANAGER' | 'STAFF' | 'READONLY';\r\n\r\n/**\r\n * Logical modules that participate in the RACI matrix.\r\n * These should line up with:\r\n *  - RaciService.catalog keys\r\n *  - ModuleCatalog keys in the DB\r\n *  - Any routes that use the raciGuard(moduleKey)\r\n */\r\nexport type ModuleKey =\r\n  | 'dashboard'\r\n  | 'residential'\r\n  | 'programmatic'\r\n  | 'finance'\r\n  | 'behavior'\r\n  | 'ane'\r\n  | 'restraints'\r\n  | 'enclosed-beds'\r\n  | 'protective-devices'\r\n  | 'prohibitions'\r\n  | 'medical-nursing'\r\n  | 'medical-med-admin'\r\n  | 'iss'\r\n  | 'staff'\r\n  | 'cost-report'\r\n  | 'billing'\r\n  | 'settings'\r\n  | 'raci';\r\n\r\n/**\r\n * Which RACI roles can SEE each module at all.\r\n * (The full R/A/C/I buckets per module are below in DEFAULT_RACI.)\r\n */\r\nconst MODULE_ACCESS: Record<ModuleKey, RaciRole[]> = {\r\n  dashboard: ['OWNER', 'ADMIN', 'MANAGER', 'STAFF', 'READONLY'],\r\n\r\n  residential: ['OWNER', 'ADMIN', 'MANAGER'],\r\n  programmatic: ['OWNER', 'ADMIN'],\r\n  finance: ['OWNER', 'ADMIN'],\r\n  behavior: ['OWNER', 'ADMIN', 'MANAGER'],\r\n  ane: ['OWNER', 'ADMIN', 'MANAGER'],\r\n  restraints: ['OWNER', 'ADMIN', 'MANAGER'],\r\n  'enclosed-beds': ['OWNER', 'ADMIN', 'MANAGER'],\r\n  'protective-devices': ['OWNER', 'ADMIN', 'MANAGER'],\r\n  prohibitions: ['OWNER', 'ADMIN', 'MANAGER'],\r\n  'medical-nursing': ['OWNER', 'ADMIN', 'MANAGER'],\r\n  'medical-med-admin': ['OWNER', 'ADMIN', 'MANAGER'],\r\n\r\n  iss: ['OWNER', 'ADMIN', 'MANAGER', 'STAFF'],\r\n  staff: ['OWNER', 'ADMIN', 'MANAGER'],\r\n  'cost-report': ['OWNER', 'ADMIN'],\r\n\r\n  billing: ['OWNER', 'ADMIN'],\r\n  settings: ['OWNER', 'ADMIN'],\r\n  raci: ['OWNER', 'ADMIN'],\r\n};\r\n\r\n/** Quick helper used by guards & services: which RACI roles can access this module? */\r\nexport function allowedRolesFor(moduleKey: ModuleKey): RaciRole[] {\r\n  return MODULE_ACCESS[moduleKey] ?? [];\r\n}\r\n\r\n/**\r\n * Full RACI matrix shape for a given module.\r\n * - r: Responsible\r\n * - a: Accountable\r\n * - c: Consulted\r\n * - i: Informed\r\n */\r\nexport interface Raci {\r\n  r: RaciRole[];\r\n  a: RaciRole[];\r\n  c: RaciRole[];\r\n  i: RaciRole[];\r\n}\r\n\r\n/**\r\n * Default RACI configuration per module.\r\n * You can:\r\n *  - use this as an in-memory fallback (what you're doing now)\r\n *  - or seed it into the DB for ModuleCatalog / RaciAssignment\r\n */\r\nexport const DEFAULT_RACI: Record<ModuleKey, Raci> = Object.fromEntries(\r\n  (Object.keys(MODULE_ACCESS) as ModuleKey[]).map((key) => [\r\n    key,\r\n    {\r\n      r: MODULE_ACCESS[key],\r\n      a: ['OWNER', 'ADMIN'],\r\n      c: ['MANAGER'],\r\n      i: ['STAFF', 'READONLY'],\r\n    },\r\n  ]),\r\n) as Record<ModuleKey, Raci>;\r\n\r\n/** Convenience list if you ever need to iterate safely */\r\nexport const ALL_MODULE_KEYS = Object.keys(MODULE_ACCESS) as ModuleKey[];\r\n","// libs/shared-models/src/lib/shared-models.ts\r\n\r\nexport function sharedModels(): string {\r\n  return 'shared-models';\r\n}\r\n","// libs/shared-models/src/lib/ownership.ts\r\n\r\nimport type { AppRole } from './auth/roles';\r\n\r\n/**\r\n * Ownership domains in your app.\r\n * These are the areas where you assign a single \"owner\" role.\r\n */\r\nexport type OwnershipKey =\r\n  | 'dashboard'\r\n  | 'residential'\r\n  | 'iss'\r\n  | 'billing'\r\n  | 'settings'\r\n  | 'raci'\r\n  | 'programmatic'\r\n  | 'finance'; //  added\r\n\r\n/**\r\n * Single \"owner\" role for each domain.\r\n * Adjust mappings to whatever fits your org.\r\n */\r\nexport const OWNERSHIP_OWNER: Record<OwnershipKey, AppRole> = {\r\n  dashboard: 'ProgramDirector',\r\n  residential: 'ProgramDirector',\r\n  iss: 'ISSManager',\r\n  billing: 'FinanceOfficer',\r\n  settings: 'Admin',\r\n  raci: 'ComplianceOfficer',\r\n  programmatic: 'ProgramDirector',\r\n  finance: 'FinanceOfficer',\r\n};\r\n","// libs/shared-models/src/lib/nav/role-menu.ts\r\n// Single source of truth for sidebar structure + icons to register\r\n\r\nimport type { AppRole } from '../auth/roles';\r\n\r\n// ---- Types ----\r\nexport type MenuItem = {\r\n  label: string;\r\n  path: string;\r\n  icon: string;       // lucide icon name\r\n  badge?: number;\r\n};\r\n\r\nexport type MenuGroup = {\r\n  id: string;         // stable key for trackBy\r\n  label: string;\r\n  items: MenuItem[];\r\n};\r\n\r\n// ---- Group presets ----\r\nconst CORE: MenuGroup = {\r\n  id: 'core',\r\n  label: 'Core',\r\n  items: [\r\n    { label: 'Dashboard', path: '/dashboard',             icon: 'layout-dashboard' },\r\n    { label: 'Consumers', path: '/consumers',             icon: 'users' },\r\n    { label: 'Locations', path: '/residential/locations', icon: 'home' },\r\n  ],\r\n};\r\n\r\nconst COMPLIANCE: MenuGroup = {\r\n  id: 'compliance',\r\n  label: 'Compliance',\r\n  items: [\r\n    { label: 'Residential',        path: '/compliance/residential',   icon: 'home' },\r\n    { label: 'Programmatic',       path: '/compliance/programmatic',  icon: 'list-checks' },\r\n    { label: 'Finance / Rent',     path: '/compliance/finance',       icon: 'wallet' },\r\n    { label: 'Behavior',           path: '/compliance/behavior',      icon: 'activity' },\r\n    { label: 'Abuse/Neglect/ANE',  path: '/compliance/ane',           icon: 'shield-alert' },\r\n    { label: 'Restraints',         path: '/compliance/restraints',    icon: 'hand' },\r\n    { label: 'Enclosed Beds',      path: '/compliance/enclosed-beds', icon: 'bed' },\r\n    { label: 'Protective Devices', path: '/compliance/protective',    icon: 'shield' },\r\n    { label: 'Prohibitions',       path: '/compliance/prohibitions',  icon: 'ban' },\r\n  ],\r\n};\r\n\r\nconst MEDICAL: MenuGroup = {\r\n  id: 'medical',\r\n  label: 'Medical',\r\n  items: [\r\n    { label: 'Nursing',   path: '/medical/nursing',   icon: 'stethoscope' },\r\n    { label: 'Med Admin', path: '/medical/med-admin', icon: 'pill' },\r\n  ],\r\n};\r\n\r\n// Training lives under Staff\r\nconst STAFF: MenuGroup = {\r\n  id: 'staff',\r\n  label: 'Staff',\r\n  items: [\r\n    { label: 'Direct Care Staff', path: '/staff/direct-care',  icon: 'users' },\r\n    { label: 'Case Manager',      path: '/staff/case-manager', icon: 'briefcase' },\r\n    { label: 'Training',          path: '/staff/training',     icon: 'graduation-cap' },\r\n  ],\r\n};\r\n\r\nconst ISS: MenuGroup = {\r\n  id: 'iss',\r\n  label: 'ISS (Day Habilitation)',\r\n  items: [\r\n    { label: 'ISS Home',    path: '/iss',        icon: 'user-round' },\r\n    { label: 'ISS Manager',  path: '/iss/manager',      icon: 'user-cog' },\r\n    { label: 'Daily Log',    path: '/iss/daily-log',    icon: 'file-text' },\r\n    { label: 'Notes Review', path: '/iss/notes-review', icon: 'list-checks' },\r\n    { label: 'Notes Gallery',path: '/iss/notes-gallery',icon: 'images' },\r\n  ],\r\n};\r\n\r\nconst ADMIN: MenuGroup = {\r\n  id: 'admin',\r\n  label: 'Admin',\r\n  items: [\r\n    { label: 'Cost Report',   path: '/admin/cost-report', icon: 'file-spreadsheet' },\r\n    { label: 'Users & Roles', path: '/admin/users',       icon: 'shield-check' },\r\n  ],\r\n};\r\n\r\n// ---- Role  Menus ----\r\n// NOTE: AppRole currently includes:\r\n// 'Admin' | 'CaseManager' | 'Nurse' | 'DirectCareStaff' | 'ISSManager' | 'ISSStaff' | 'Finance'\r\n// | 'ProgramDirector' | 'ComplianceOfficer' | 'BehaviorSupportLead'\r\n// | 'FinanceOfficer' | 'MedicalDirector'\r\nconst BY_ROLE: Record<AppRole, MenuGroup[]> = {\r\n  // Full access\r\n  Admin:           [CORE, COMPLIANCE, MEDICAL, STAFF, ISS, ADMIN],\r\n\r\n  // Program / compliance leadership  treat like Admin for now\r\n  ProgramDirector: [CORE, COMPLIANCE, MEDICAL, STAFF, ISS, ADMIN],\r\n  ComplianceOfficer: [CORE, COMPLIANCE, STAFF, ADMIN],\r\n\r\n  // Clinical / behavior leads\r\n  BehaviorSupportLead: [CORE, COMPLIANCE, STAFF],\r\n  MedicalDirector:     [CORE, MEDICAL, COMPLIANCE, STAFF],\r\n\r\n  // Finance roles\r\n  Finance:        [CORE, COMPLIANCE, ADMIN],\r\n  FinanceOfficer: [CORE, COMPLIANCE, ADMIN],\r\n\r\n  // Case management / nursing / direct care\r\n  CaseManager:     [CORE, COMPLIANCE, STAFF],\r\n  Nurse:           [CORE, MEDICAL, COMPLIANCE],\r\n  DirectCareStaff: [CORE, COMPLIANCE, STAFF],\r\n\r\n  // ISS\r\n  ISSManager: [CORE, ISS, COMPLIANCE],\r\n  ISSStaff:   [CORE, ISS],\r\n};\r\n\r\n// Pure, synchronous API expected by your Sidebar\r\nexport function menuForRole(role: AppRole): MenuGroup[] {\r\n  return BY_ROLE[role] ?? [CORE];\r\n}\r\n\r\n// Export the list of Lucide icon names we use so the app can register them at bootstrap.\r\nexport const MENU_ICON_NAMES = [\r\n  'layout-dashboard', 'users', 'home',\r\n  'list-checks', 'wallet', 'activity', 'shield-alert', 'hand', 'bed', 'shield', 'ban',\r\n  'stethoscope', 'pill', 'briefcase', 'graduation-cap',\r\n  'user-round', 'user-cog', 'file-spreadsheet', 'shield-check', 'file-text', 'images',\r\n] as const;\r\n\r\nexport type MenuIconName = (typeof MENU_ICON_NAMES)[number];\r\n","// libs/shared-models/src/lib/iss/iss.models.ts\r\n\r\n// ---------- Core ISS domain models ----------\r\n\r\nexport interface Provider {\r\n  id: number;\r\n  name: string;\r\n  licenseNumber: string;\r\n\r\n  // backend currently doesn't send `active`, keep optional for future use\r\n  active?: boolean;\r\n\r\n  createdAt: string; // ISO datetime\r\n  updatedAt: string; // ISO datetime\r\n}\r\n\r\nexport type PlaceOfService = 'ON_SITE' | 'OFF_SITE' | string;\r\n\r\n/**\r\n * Consumer as returned by the ISS API\r\n * (note: issProvider is embedded, not just providerId)\r\n */\r\nexport interface Consumer {\r\n  id: number;\r\n\r\n  firstName: string;\r\n  lastName: string;\r\n\r\n  // your API returns these as strings\r\n  levelOfNeed?: string | number;\r\n  placeOfService?: PlaceOfService;\r\n\r\n  dateOfBirth?: string | null;\r\n  medicaidNumber?: string | null;\r\n\r\n  // legacy / optional\r\n  mrn?: string | null;\r\n  medicaidId?: string | null;\r\n  active?: boolean;\r\n\r\n  // relation\r\n  issProvider?: Provider;\r\n\r\n  createdAt: string; // ISO datetime\r\n  updatedAt: string; // ISO datetime;\r\n\r\n  // Optional FK if you want it on the client\r\n  providerId?: number;\r\n}\r\n\r\n// ---------- Weekly initials + notes (for staff log header) ----------\r\n\r\n/**\r\n * One row in a weekly initials grid, e.g. \"Communication\" with MonFri cells.\r\n * Used for:\r\n * - Socialization\r\n * - Self-help\r\n * - Adaptive\r\n * - Implementation\r\n * - Community integration\r\n */\r\nexport interface WeeklyInitialRow {\r\n  label: string;\r\n  mon: string;\r\n  tue: string;\r\n  wed: string;\r\n  thu: string;\r\n  fri: string;\r\n}\r\n\r\n/**\r\n * One note row for:\r\n * \"Community Locations Visited & Special Events or Occurrences\"\r\n */\r\nexport interface WeeklyNote {\r\n  /** ISO date \"YYYY-MM-DD\" */\r\n  date: string;\r\n  initials: string;\r\n  comment: string;\r\n}\r\n\r\n// ---------- Staff log structure ----------\r\n\r\n/**\r\n * Staff-log header:\r\n * - Core ISS 8615-style fields\r\n * - Weekly initials groups\r\n * - Weekly narrative notes\r\n * - Extra keys allowed via index signature\r\n *\r\n * This matches the `header` object in your JSON:\r\n *   \"header\": {\r\n *     \"lon\": \"5\",\r\n *     \"levelOfNeed\": 5,\r\n *     \"individualName\": \"Chris Brown\",\r\n *     \"placeOfService\": \"OFF_SITE\",\r\n *     \"staffNameTitle\": \"ISS Direct Care Staff\",\r\n *     \"issProviderName\": \"Ellis Works\",\r\n *     \"issProviderLicense\": \"311123\",\r\n *     ...\r\n *   }\r\n */\r\nexport interface StaffLogHeader {\r\n  // ISS 8615-style fields\r\n  individualName?: string;\r\n  date?: string;                     // \"YYYY-MM-DD\" for Monday of week\r\n  lon?: string;\r\n  levelOfNeed?: number | string;\r\n  placeOfService?: PlaceOfService;\r\n\r\n  provider?: string;                 // Name of ISS provider\r\n  license?: string;                  // License number\r\n  staffNameTitle?: string;\r\n\r\n  issProviderName?: string;\r\n  issProviderLicense?: string;\r\n\r\n  // Older / generic fields (keep for flexibility)\r\n  locationName?: string;\r\n  staffInitials?: string;\r\n  ratio?: string;\r\n\r\n  // Weekly initials groups (used by ISS week page)\r\n  socialization?: WeeklyInitialRow[];\r\n  selfHelp?: WeeklyInitialRow[];\r\n  adaptive?: WeeklyInitialRow[];\r\n  implementation?: WeeklyInitialRow[];\r\n  community?: WeeklyInitialRow[];\r\n\r\n  // Weekly narrative notes\r\n  notes?: WeeklyNote[];\r\n\r\n  // room for extra header fields\r\n  [key: string]: any;\r\n}\r\n\r\n/**\r\n * A single service entry for one day.\r\n * The API returns this shape under serviceWeek.monday[0], etc.\r\n */\r\nexport interface ServiceDayEntry {\r\n  // Core time/activity fields\r\n  timeIn?: string | null;          // kept for backward compat\r\n  timeOut?: string | null;\r\n  activity?: string | null;\r\n  notes?: string | null;\r\n\r\n  // Rich ISS week card fields\r\n  date?: string | null;            // \"YYYY-MM-DD\"\r\n  providerName?: string | null;\r\n  providerSignature?: string | null;\r\n  start?: string | null;\r\n  end?: string | null;\r\n  minutes?: number | null;\r\n  setting?: 'on_site' | 'off_site' | string | null;\r\n  individualsCount?: number | null;\r\n  staffCount?: number | null;\r\n\r\n  // free-form extension space\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface ServiceWeek {\r\n  monday: ServiceDayEntry[];\r\n  tuesday: ServiceDayEntry[];\r\n  wednesday: ServiceDayEntry[];\r\n  thursday: ServiceDayEntry[];\r\n  friday: ServiceDayEntry[];\r\n  saturday?: ServiceDayEntry[];\r\n  sunday?: ServiceDayEntry[];\r\n\r\n  // allow extra metadata if needed\r\n  [key: string]: any;\r\n}\r\n\r\nexport type StaffLogStatus =\r\n  | 'draft'\r\n  | 'submitted'\r\n  | 'approved'\r\n  | 'rejected'\r\n  | 'voided';\r\n\r\n/**\r\n * Full staff log as returned by the API.\r\n * Your JSON currently nests consumer + issProvider.\r\n */\r\nexport interface StaffLog {\r\n  id: number;            // numeric ID\r\n\r\n  // FKs (may or may not be present in serialized JSON)\r\n  providerId?: number;\r\n  consumerId?: number;\r\n\r\n  /**\r\n   * Monday of the week (ISO \"YYYY-MM-DD\")\r\n   * e.g. \"2025-09-29\"\r\n   */\r\n  serviceDate: string;\r\n\r\n  header: StaffLogHeader;\r\n  serviceWeek: ServiceWeek;\r\n\r\n  // Top-level weekly sections / notes (you are currently using header.notes)\r\n  weeklySections?: any[];\r\n  notes?: any[];\r\n\r\n  status?: StaffLogStatus;\r\n\r\n  createdAt: string;\r\n  updatedAt: string;\r\n\r\n  // relations\r\n  consumer?: Consumer;\r\n  issProvider?: Provider;\r\n}\r\n\r\n// ---------- Week summaries ----------\r\n\r\nexport interface WeekSummary {\r\n  serviceDate: string;\r\n  hasLog: boolean;\r\n  logId?: number | null;\r\n  status?: StaffLogStatus;\r\n  weekNumber?: number;\r\n  totalHours?: number;   // optional, but your template may use it\r\n}\r\n\r\n// ---------- DTOs ----------\r\n\r\nexport interface CreateStaffLogDto {\r\n  providerId: number;    // numeric ID\r\n  consumerId: number;    // numeric ID\r\n  serviceDate: string;   // \"YYYY-MM-DD\"\r\n  header: StaffLogHeader;\r\n  serviceWeek: ServiceWeek;\r\n}\r\n\r\nexport interface UpdateStaffLogDto {\r\n  header?: StaffLogHeader;\r\n  serviceWeek?: ServiceWeek;\r\n  status?: StaffLogStatus;\r\n}\r\n\r\n\r\n\r\n// ======================================================================\r\n//  NORMALIZATION HELPERS (API  UI)\r\n// ======================================================================\r\n\r\n/**\r\n * Normalize any date-like value to 'YYYY-MM-DD' or return null if invalid.\r\n */\r\nfunction normalizeDateToYmd(value: unknown): string | null {\r\n  if (!value || typeof value !== 'string') return null;\r\n\r\n  // Strip any time portion (e.g. '2025-10-01T00:00:00'  '2025-10-01')\r\n  const candidate = value.slice(0, 10);\r\n\r\n  // Very lightweight guard  only accept ISO-like 'YYYY-MM-DD'\r\n  if (!/^\\d{4}-\\d{2}-\\d{2}$/.test(candidate)) {\r\n    return null;\r\n  }\r\n\r\n  return candidate;\r\n}\r\n\r\n/**\r\n * Normalize WeeklyNote[] dates coming back from the API.\r\n */\r\nfunction normalizeWeeklyNotesDates(notes?: WeeklyNote[]): WeeklyNote[] {\r\n  if (!Array.isArray(notes)) return [];\r\n\r\n  return notes.map((n) => {\r\n    const normalized = normalizeDateToYmd(n.date);\r\n    return {\r\n      ...n,\r\n      date: normalized ?? n.date ?? '',\r\n    };\r\n  });\r\n}\r\n\r\n/**\r\n * Normalize ServiceWeek.*[].date fields from various date formats\r\n * to 'YYYY-MM-DD' where possible.\r\n */\r\nfunction normalizeServiceWeekDates(week?: ServiceWeek): ServiceWeek | undefined {\r\n  if (!week) return undefined;\r\n\r\n  const normalizeEntries = (entries?: ServiceDayEntry[]): ServiceDayEntry[] => {\r\n    if (!Array.isArray(entries)) return [];\r\n    return entries.map((e) => {\r\n      const normalized = normalizeDateToYmd(e.date);\r\n      return {\r\n        ...e,\r\n        date: normalized ?? e.date ?? null,\r\n      };\r\n    });\r\n  };\r\n\r\n  return {\r\n    ...week,\r\n    monday: normalizeEntries(week.monday),\r\n    tuesday: normalizeEntries(week.tuesday),\r\n    wednesday: normalizeEntries(week.wednesday),\r\n    thursday: normalizeEntries(week.thursday),\r\n    friday: normalizeEntries(week.friday),\r\n    saturday: normalizeEntries(week.saturday),\r\n    sunday: normalizeEntries(week.sunday),\r\n  };\r\n}\r\n\r\n/**\r\n * API  UI:\r\n * Normalize all date-like fields on StaffLog:\r\n * - serviceDate\r\n * - header.notes[].date\r\n * - serviceWeek.*[].date\r\n *\r\n * This lets your UI stay stable even if the backend sends\r\n * '2025-10-01T00:00:00Z', plain '2025-10-01', etc.\r\n */\r\nexport function normalizeStaffLogFromApi(log: StaffLog): StaffLog {\r\n  const header: StaffLogHeader = {\r\n    ...(log.header ?? {}),\r\n  };\r\n\r\n  // Normalize header.notes dates\r\n  header.notes = normalizeWeeklyNotesDates(header.notes);\r\n\r\n  // Normalize serviceWeek dates\r\n  const normalizedWeek = normalizeServiceWeekDates(log.serviceWeek);\r\n\r\n  // Normalize top-level serviceDate\r\n  const serviceDateNormalized =\r\n    normalizeDateToYmd(log.serviceDate) ?? log.serviceDate;\r\n\r\n  return {\r\n    ...log,\r\n    serviceDate: serviceDateNormalized,\r\n    header,\r\n    serviceWeek: normalizedWeek ?? log.serviceWeek,\r\n  };\r\n}\r\n\r\n/**\r\n * UI  API:\r\n * Build the correct payload (CreateStaffLogDto vs UpdateStaffLogDto)\r\n * from a raw form value, and normalize all date fields on the way out.\r\n */\r\nexport function buildStaffLogSavePayload(args: {\r\n  currentLogId: number | null;\r\n  providerId: number;\r\n  consumerId: number;\r\n  serviceDate: string;\r\n  rawForm: any;\r\n}): { logId: number | null; payload: CreateStaffLogDto | UpdateStaffLogDto } {\r\n  const { currentLogId, providerId, consumerId, serviceDate, rawForm } = args;\r\n\r\n  // ----- HEADER (flex bag with index signature) -----\r\n  const rawHeader = rawForm.header ?? {};\r\n\r\n  const normalizedNotes: WeeklyNote[] = (rawForm.notes ?? []).map(\r\n    (n: any): WeeklyNote => {\r\n      const normalized = normalizeDateToYmd(n?.date);\r\n      return {\r\n        date: normalized ?? (n?.date ?? ''),\r\n        initials: n?.initials ?? '',\r\n        comment: n?.comment ?? '',\r\n      };\r\n    },\r\n  );\r\n\r\n  const header: StaffLogHeader = {\r\n    ...rawHeader,\r\n    socialization: rawForm.socialization ?? [],\r\n    selfHelp: rawForm.selfHelp ?? [],\r\n    adaptive: rawForm.adaptive ?? [],\r\n    implementation: rawForm.implementation ?? [],\r\n    community: rawForm.community ?? [],\r\n    notes: normalizedNotes,\r\n  };\r\n\r\n  // Optional: if header has a 'date' field, normalize it\r\n  if ((header as any).date) {\r\n    const normalizedHeaderDate = normalizeDateToYmd((header as any).date);\r\n    if (normalizedHeaderDate) {\r\n      (header as any).date = normalizedHeaderDate;\r\n    }\r\n  }\r\n\r\n  // ----- SERVICE WEEK (rows  ServiceWeek) -----\r\n  const rows: any[] = rawForm.serviceWeek ?? [];\r\n\r\n  const mapRow = (v: any): ServiceDayEntry => {\r\n    const normalizedRowDate = normalizeDateToYmd(v?.date);\r\n\r\n    return {\r\n      // Core fields\r\n      timeIn: v?.start ?? null,\r\n      timeOut: v?.end ?? null,\r\n      activity: null,\r\n      notes: null,\r\n\r\n      // Extended ISS fields\r\n      date: normalizedRowDate ?? (v?.date ?? null),\r\n      providerName: v?.providerName ?? null,\r\n      providerSignature: v?.providerSignature ?? null,\r\n      start: v?.start ?? null,\r\n      end: v?.end ?? null,\r\n      minutes: v?.minutes ?? 0,\r\n      setting: v?.setting ?? 'on_site',\r\n      individualsCount: v?.individualsCount ?? 0,\r\n      staffCount: v?.staffCount ?? 1,\r\n    };\r\n  };\r\n\r\n  // Always map 5 weekdays (fallback to empty object if missing row)\r\n  const mon = mapRow(rows[0] ?? {});\r\n  const tue = mapRow(rows[1] ?? {});\r\n  const wed = mapRow(rows[2] ?? {});\r\n  const thu = mapRow(rows[3] ?? {});\r\n  const fri = mapRow(rows[4] ?? {});\r\n\r\n  const serviceWeek: ServiceWeek = {\r\n    monday: [mon],\r\n    tuesday: [tue],\r\n    wednesday: [wed],\r\n    thursday: [thu],\r\n    friday: [fri],\r\n  };\r\n\r\n  // Normalize serviceDate going out\r\n  const normalizedServiceDate =\r\n    normalizeDateToYmd(serviceDate) ?? serviceDate;\r\n\r\n  // ----- Decide create vs update -----\r\n  if (currentLogId) {\r\n    const payload: UpdateStaffLogDto = {\r\n      header,\r\n      serviceWeek,\r\n    };\r\n    return { logId: currentLogId, payload };\r\n  }\r\n\r\n  const payload: CreateStaffLogDto = {\r\n    providerId,\r\n    consumerId,\r\n    serviceDate: normalizedServiceDate,\r\n    header,\r\n    serviceWeek,\r\n  };\r\n\r\n  return { logId: null, payload };\r\n}\r\n","/* eslint-disable @nx/enforce-module-boundaries */\r\nimport { Controller, Get, Query } from '@nestjs/common';\r\n\r\nimport type {\r\n  AppRole,\r\n  ModuleKey,\r\n  RaciRole,\r\n} from '@hhsc-compliance/shared-models';\r\nimport { RaciService } from './raci.service';\r\n\r\n@Controller({\r\n  path: 'raci',\r\n  version: '1',\r\n})\r\nexport class RaciController {\r\n  constructor(private readonly svc: RaciService) {}\r\n\r\n  /**\r\n   * GET /api/v1/raci/allowed-roles?module=programmatic\r\n   * Returns the coarse-grained RACI roles for a given module.\r\n   */\r\n  @Get('allowed-roles')\r\n  allowedRoles(@Query('module') module: ModuleKey) {\r\n    return this.svc.allowedRoles(module);\r\n  }\r\n\r\n  /**\r\n   * GET /api/v1/raci/menu?role=Admin\r\n   * Builds a nav menu for a given fine-grained AppRole by mapping it\r\n   * into a coarse RaciRole bucket.\r\n   */\r\n  @Get('menu')\r\n  async menu(@Query('role') role: AppRole) {\r\n    const raciRole = this.mapAppRoleToRaciRole(role);\r\n    return this.svc.buildMenuForRole(raciRole);\r\n  }\r\n\r\n  /**\r\n   * Map fine-grained AppRole -> coarse RaciRole bucket.\r\n   * Adjust this mapping anytime you add/change AppRole values.\r\n   */\r\n  private mapAppRoleToRaciRole(role: AppRole): RaciRole {\r\n    switch (role) {\r\n      //  Top-level owners/admins\r\n      case 'Admin':\r\n      case 'ProgramDirector':\r\n      case 'ComplianceOfficer':\r\n      case 'MedicalDirector':\r\n      case 'FinanceOfficer':\r\n        return 'ADMIN';\r\n\r\n      //  Managers / leads\r\n      case 'ISSManager':\r\n      case 'CaseManager':\r\n      case 'BehaviorSupportLead':\r\n      case 'Nurse':\r\n        return 'MANAGER';\r\n\r\n      //  Front-line staff\r\n      case 'DirectCareStaff':\r\n      case 'ISSStaff':\r\n      case 'Finance':\r\n        return 'STAFF';\r\n\r\n      // Default to READONLY bucket\r\n      default:\r\n        return 'READONLY';\r\n    }\r\n  }\r\n}\r\n","// api/src/app/common/middleware/request-id.middleware.ts\r\nimport { Injectable, NestMiddleware } from '@nestjs/common';\r\nimport { randomUUID } from 'node:crypto';\r\n\r\n@Injectable()\r\nexport class RequestIdMiddleware implements NestMiddleware {\r\n  use(req: any, res: any, next: () => void) {\r\n    const header =\r\n      (req.headers['x-request-id'] as string | undefined) ||\r\n      (req.headers['x-requestid'] as string | undefined);\r\n    const id = header || randomUUID();\r\n    req.id = id;\r\n    res.setHeader('X-Request-Id', id);\r\n    next();\r\n  }\r\n}\r\n","module.exports = require(\"node:crypto\");","/* eslint-disable @nx/enforce-module-boundaries */\r\nimport { Module } from '@nestjs/common';\r\nimport { TypeOrmModule } from '@nestjs/typeorm';\r\n\r\nimport { IssProvider } from './entities/iss-provider.entity';\r\nimport { IssStaffLog } from './entities/iss-staff-log.entity';\r\n\r\nimport { IssService } from './iss.service';\r\nimport { IssController } from './iss.controller';\r\n\r\nimport { ConsumersModule } from '../consumers/consumers.module';\r\n\r\n@Module({\r\n  imports: [\r\n    TypeOrmModule.forFeature([IssProvider, IssStaffLog]),\r\n    ConsumersModule, //  this makes ConsumersService visible here\r\n  ],\r\n  providers: [IssService],\r\n  controllers: [IssController],\r\n  exports: [IssService],\r\n})\r\nexport class IssModule {}\r\n","import {\r\n  Column,\r\n  CreateDateColumn,\r\n  Entity,\r\n  OneToMany,\r\n  PrimaryGeneratedColumn,\r\n  UpdateDateColumn,\r\n} from 'typeorm';\r\n\r\nimport { IssStaffLog } from './iss-staff-log.entity';\r\nimport { Consumer } from '../../consumers/entities/consumer.entity';\r\n\r\n@Entity('iss_provider')\r\nexport class IssProvider {\r\n  @PrimaryGeneratedColumn()\r\n  id: number;\r\n\r\n  @Column({ length: 255 })\r\n  name: string;\r\n\r\n  @Column({ name: 'license_number', length: 50 })\r\n  licenseNumber: string;\r\n\r\n  @OneToMany(() => Consumer, (consumer) => consumer.issProvider)\r\n  consumers: Consumer[];\r\n\r\n  @OneToMany(() => IssStaffLog, (log) => log.issProvider)\r\n  staffLogs: IssStaffLog[];   //  MUST be an array\r\n\r\n  @CreateDateColumn({ name: 'created_at' })\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn({ name: 'updated_at' })\r\n  updatedAt: Date;\r\n}\r\n","/* eslint-disable @nx/enforce-module-boundaries */\r\nimport {\r\n  Column,\r\n  CreateDateColumn,\r\n  Entity,\r\n  JoinColumn,\r\n  ManyToOne,\r\n  PrimaryGeneratedColumn,\r\n  UpdateDateColumn,\r\n} from 'typeorm';\r\n\r\nimport { IssProvider } from './iss-provider.entity';\r\nimport { Consumer } from '../../consumers/entities/consumer.entity';\r\n\r\n@Entity('iss_staff_log')\r\nexport class IssStaffLog {\r\n  @PrimaryGeneratedColumn()\r\n  id: number;\r\n\r\n  //  Many logs belong to one consumer\r\n  @ManyToOne(() => Consumer, (consumer) => consumer.staffLogs, {\r\n    nullable: false,\r\n  })\r\n  @JoinColumn({ name: 'consumer_id' })\r\n  consumer: Consumer;\r\n\r\n  //  Many logs belong to one ISS provider\r\n  @ManyToOne(() => IssProvider, (provider) => provider.staffLogs, {\r\n    nullable: false,\r\n  })\r\n  @JoinColumn({ name: 'iss_provider_id' })\r\n  issProvider: IssProvider;\r\n\r\n  @Column({ name: 'service_date', type: 'date' })\r\n  serviceDate: string; // or Date if you prefer, but string is fine for `date`\r\n\r\n  // Store big JSON blobs from your Angular form\r\n  @Column({ name: 'header', type: 'jsonb' })\r\n  header: any;\r\n\r\n  @Column({ name: 'service_week', type: 'jsonb' })\r\n  serviceWeek: any;\r\n\r\n  @Column({ name: 'weekly_sections', type: 'jsonb' })\r\n  weeklySections: any;\r\n\r\n  @Column({ name: 'notes', type: 'jsonb' })\r\n  notes: any;\r\n\r\n  @CreateDateColumn({ name: 'created_at', type: 'timestamptz' })\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn({ name: 'updated_at', type: 'timestamptz' })\r\n  updatedAt: Date;\r\n}\r\n","/* eslint-disable @nx/enforce-module-boundaries */\r\nimport {\r\n  Column,\r\n  CreateDateColumn,\r\n  Entity,\r\n  JoinColumn,\r\n  ManyToOne,\r\n  OneToMany,\r\n  PrimaryGeneratedColumn,\r\n  UpdateDateColumn,\r\n} from 'typeorm';\r\n\r\nimport { IssProvider } from '../../iss/entities/iss-provider.entity';\r\nimport { IssStaffLog } from '../../iss/entities/iss-staff-log.entity';\r\n\r\n@Entity('consumer')\r\nexport class Consumer {\r\n  @PrimaryGeneratedColumn()\r\n  id: number;\r\n\r\n  @Column({ name: 'first_name', length: 100 })\r\n  firstName: string;\r\n\r\n  @Column({ name: 'last_name', length: 100 })\r\n  lastName: string;\r\n\r\n  @Column({ name: 'date_of_birth', type: 'date', nullable: true })\r\n  dateOfBirth: Date | null;\r\n\r\n  @Column({ name: 'medicaid_number', length: 64, nullable: true })\r\n  medicaidNumber: string | null;\r\n\r\n  @Column({ name: 'level_of_need', length: 32, nullable: true })\r\n  levelOfNeed: string | null;\r\n\r\n  @Column({ name: 'place_of_service', length: 32, nullable: true })\r\n  placeOfService: string | null;\r\n\r\n  @ManyToOne(() => IssProvider, (provider) => provider.consumers, {\r\n    nullable: false,\r\n  })\r\n  @JoinColumn({ name: 'iss_provider_id' })\r\n  issProvider: IssProvider;\r\n\r\n  //  Inverse side of IssStaffLog.consumer\r\n  @OneToMany(() => IssStaffLog, (log) => log.consumer)\r\n  staffLogs: IssStaffLog[];\r\n\r\n  @CreateDateColumn({ name: 'created_at', type: 'timestamptz' })\r\n  createdAt: Date;\r\n\r\n  @UpdateDateColumn({ name: 'updated_at', type: 'timestamptz' })\r\n  updatedAt: Date;\r\n}\r\n","/* eslint-disable @nx/enforce-module-boundaries */\r\nimport { Injectable, NotFoundException } from '@nestjs/common';\r\nimport { InjectRepository } from '@nestjs/typeorm';\r\nimport { Repository } from 'typeorm';\r\n\r\nimport { IssProvider } from './entities/iss-provider.entity';\r\nimport { IssStaffLog } from './entities/iss-staff-log.entity';\r\n\r\nimport { CreateIssProviderDto } from './dto/create-iss-provider.dto';\r\nimport { CreateIssStaffLogDto } from './dto/create-iss-staff-log.dto';\r\nimport { UpdateIssStaffLogDto } from './dto/update-iss-staff-log.dto';\r\nimport { UpdateIssProviderDto } from './dto/update-iss-provider.dto';\r\n\r\nimport { ConsumersService } from '../consumers/consumers.service';\r\nimport { Consumer } from '../consumers/entities/consumer.entity';\r\nimport { CreateConsumerDto } from '../consumers/dto/create-consumer.dto';\r\n\r\n@Injectable()\r\nexport class IssService {\r\n  constructor(\r\n    @InjectRepository(IssProvider)\r\n    private readonly providerRepo: Repository<IssProvider>,\r\n\r\n    @InjectRepository(IssStaffLog)\r\n    private readonly staffLogRepo: Repository<IssStaffLog>,\r\n\r\n    private readonly consumersService: ConsumersService,\r\n  ) {}\r\n\r\n  /* =========================\r\n   * PROVIDERS - CRUD\r\n   * ========================= */\r\n\r\n  async createProvider(dto: CreateIssProviderDto): Promise<IssProvider> {\r\n    const provider = this.providerRepo.create({\r\n      name: dto.name,\r\n      licenseNumber: dto.licenseNumber,\r\n    });\r\n\r\n    return this.providerRepo.save(provider);\r\n  }\r\n\r\n  async findAllProviders(): Promise<IssProvider[]> {\r\n    return this.providerRepo.find({\r\n      order: { name: 'ASC' },\r\n    });\r\n  }\r\n\r\n  async findProviderById(id: number): Promise<IssProvider> {\r\n    const provider = await this.providerRepo.findOne({ where: { id } });\r\n\r\n    if (!provider) {\r\n      throw new NotFoundException(`ISS provider ${id} not found`);\r\n    }\r\n\r\n    return provider;\r\n  }\r\n\r\n  async updateProvider(\r\n    id: number,\r\n    dto: UpdateIssProviderDto,\r\n  ): Promise<IssProvider> {\r\n    const provider = await this.findProviderById(id);\r\n    const merged = this.providerRepo.merge(provider, dto);\r\n    return this.providerRepo.save(merged);\r\n  }\r\n\r\n  async removeProvider(id: number): Promise<void> {\r\n    const provider = await this.findProviderById(id);\r\n    await this.providerRepo.remove(provider);\r\n  }\r\n\r\n  /* =========================\r\n   * CONSUMERS - delegated to ConsumersService\r\n   * ========================= */\r\n\r\n  async createConsumer(dto: CreateConsumerDto): Promise<Consumer> {\r\n    // mirrors POST /v1/iss/consumers in IssController\r\n    return this.consumersService.create(dto);\r\n  }\r\n\r\n  async findConsumersByProvider(\r\n    issProviderId: number,\r\n  ): Promise<Consumer[]> {\r\n    // mirrors GET /v1/iss/consumers?issProviderId=...\r\n    return this.consumersService.findByProvider(issProviderId);\r\n  }\r\n\r\n  /* =========================\r\n   * STAFF LOGS (8615) - CREATE\r\n   * ========================= */\r\n\r\n  async createStaffLog(dto: CreateIssStaffLogDto): Promise<IssStaffLog> {\r\n    const consumer: Consumer = await this.consumersService.findOne(\r\n      dto.consumerId,\r\n    );\r\n\r\n    if (!consumer.issProvider) {\r\n      throw new NotFoundException(\r\n        `Consumer ${dto.consumerId} has no associated ISS provider`,\r\n      );\r\n    }\r\n\r\n    // Strip DTO-only field\r\n    const { consumerId, ...rest } = dto;\r\n\r\n    const log = this.staffLogRepo.create({\r\n      ...rest, // header, serviceWeek, weeklySections, notes, serviceDate\r\n      consumer,\r\n      issProvider: consumer.issProvider,\r\n    });\r\n\r\n    return this.staffLogRepo.save(log);\r\n  }\r\n\r\n  /* =========================\r\n   * STAFF LOGS (8615) - READ / LIST\r\n   * ========================= */\r\n\r\n  async findStaffLogById(id: number): Promise<IssStaffLog> {\r\n    const log = await this.staffLogRepo.findOne({\r\n      where: { id },\r\n      relations: ['consumer', 'issProvider'],\r\n    });\r\n\r\n    if (!log) {\r\n      throw new NotFoundException(`ISS staff log ${id} not found`);\r\n    }\r\n\r\n    return log;\r\n  }\r\n\r\n  async findStaffLogsForConsumer(\r\n    consumerId: number,\r\n  ): Promise<IssStaffLog[]> {\r\n    return this.staffLogRepo.find({\r\n      where: { consumer: { id: consumerId } },\r\n      relations: ['consumer', 'issProvider'],\r\n      order: {\r\n        serviceDate: 'DESC',\r\n        createdAt: 'DESC',\r\n      },\r\n    });\r\n  }\r\n\r\n  /* =========================\r\n   * STAFF LOGS (8615) - UPDATE\r\n   * ========================= */\r\n\r\n  async updateStaffLog(\r\n    id: number,\r\n    dto: UpdateIssStaffLogDto,\r\n  ): Promise<IssStaffLog> {\r\n    const existing = await this.findStaffLogById(id);\r\n\r\n    const { consumerId, ...rest } = dto as any;\r\n\r\n    const merged = this.staffLogRepo.merge(\r\n      existing,\r\n      rest as Partial<IssStaffLog>,\r\n    );\r\n\r\n    return this.staffLogRepo.save(merged);\r\n  }\r\n\r\n  /* =========================\r\n   * STAFF LOGS (8615) - DELETE\r\n   * ========================= */\r\n\r\n  async removeStaffLog(id: number): Promise<void> {\r\n    const existing = await this.findStaffLogById(id);\r\n    await this.staffLogRepo.remove(existing);\r\n  }\r\n\r\n  /* =========================\r\n   * CONSUMER + LATEST LOG\r\n   * ========================= */\r\n\r\n  async getConsumerWithLatestLog(\r\n    consumerId: number,\r\n  ): Promise<{ consumer: Consumer; latestLog: IssStaffLog | null }> {\r\n    const consumer = await this.consumersService.findOne(consumerId);\r\n\r\n    const latestLog = await this.staffLogRepo.findOne({\r\n      where: { consumer: { id: consumerId } },\r\n      relations: ['consumer', 'issProvider'],\r\n      order: {\r\n        serviceDate: 'DESC',\r\n        createdAt: 'DESC',\r\n      },\r\n    });\r\n\r\n    return { consumer, latestLog };\r\n  }\r\n\r\n  /* =========================\r\n   * LATEST OR DEFAULT TEMPLATE BY DATE\r\n   * ========================= */\r\n\r\n  async getLogForConsumerAndDate(\r\n    consumerId: number,\r\n    dateIso?: string,\r\n  ): Promise<{\r\n    consumer: Consumer;\r\n    log: IssStaffLog | null;\r\n    defaultTemplate?: any;\r\n  }> {\r\n    const consumer = await this.consumersService.findOne(consumerId);\r\n\r\n    const targetDate = dateIso ?? new Date().toISOString().slice(0, 10);\r\n\r\n    const log = await this.staffLogRepo.findOne({\r\n      where: {\r\n        consumer: { id: consumerId },\r\n        serviceDate: targetDate as any,\r\n      },\r\n      relations: ['consumer', 'issProvider'],\r\n    });\r\n\r\n    if (log) {\r\n      return { consumer, log };\r\n    }\r\n\r\n    const fullName = `${consumer.firstName} ${consumer.lastName}`;\r\n    const provider = consumer.issProvider;\r\n\r\n    const lonValue =\r\n      (consumer as any).levelOfNeed ??\r\n      (consumer as any).level_of_need ??\r\n      '';\r\n\r\n    const defaultTemplate = {\r\n      serviceDate: targetDate,\r\n      header: {\r\n        individualName: fullName,\r\n        date: targetDate,\r\n        lon: lonValue,\r\n        provider: provider?.name ?? '',\r\n        license: provider?.licenseNumber ?? '',\r\n        staffNameTitle: 'ISS Direct Care Staff',\r\n      },\r\n      serviceWeek: [],\r\n      weeklySections: {},\r\n      notes: [],\r\n    };\r\n\r\n    return { consumer, log: null, defaultTemplate };\r\n  }\r\n\r\n  /* =========================\r\n   * LIST WEEKS FOR CONSUMER (1N, paginated)\r\n   * ========================= */\r\n\r\n  async listWeeksForConsumer(\r\n    consumerId: number,\r\n    page = 1,\r\n    limit = 52,\r\n  ): Promise<{\r\n    data: { weekNumber: number; serviceDate: string; staffLogId: number }[];\r\n    meta: { total: number; page: number; limit: number; pageCount: number };\r\n  }> {\r\n    const take = Math.min(Math.max(limit, 1), 52);\r\n    const safePage = Math.max(page, 1);\r\n    const skip = (safePage - 1) * take;\r\n\r\n    const [logs, total] = await this.staffLogRepo.findAndCount({\r\n      where: { consumer: { id: consumerId } },\r\n      order: { serviceDate: 'ASC' },\r\n      select: ['id', 'serviceDate'],\r\n      skip,\r\n      take,\r\n    });\r\n\r\n    const data = logs.map((log, index) => {\r\n      const rawDate = log.serviceDate as unknown as Date | string;\r\n      const asDate =\r\n        rawDate instanceof Date ? rawDate : new Date(rawDate as string);\r\n\r\n      return {\r\n        weekNumber: skip + index + 1,\r\n        serviceDate: asDate.toISOString().slice(0, 10),\r\n        staffLogId: log.id,\r\n      };\r\n    });\r\n\r\n    return {\r\n      data,\r\n      meta: {\r\n        total,\r\n        page: safePage,\r\n        limit: take,\r\n        pageCount: Math.ceil(total / take) || 1,\r\n      },\r\n    };\r\n  }\r\n}\r\n","/* eslint-disable @nx/enforce-module-boundaries */\r\nimport { Injectable, NotFoundException } from '@nestjs/common';\r\nimport { InjectRepository } from '@nestjs/typeorm';\r\nimport { Repository } from 'typeorm';\r\n\r\nimport { Consumer } from './entities/consumer.entity';\r\nimport { IssProvider } from '../iss/entities/iss-provider.entity';\r\n\r\nimport { CreateConsumerDto } from './dto/create-consumer.dto';\r\nimport { UpdateConsumerDto } from './dto/update-consumer.dto';\r\n\r\n@Injectable()\r\nexport class ConsumersService {\r\n  constructor(\r\n    @InjectRepository(Consumer)\r\n    private readonly consumerRepo: Repository<Consumer>,\r\n\r\n    @InjectRepository(IssProvider)\r\n    private readonly providerRepo: Repository<IssProvider>,\r\n  ) {}\r\n\r\n  /* =========================\r\n   * CREATE\r\n   * ========================= */\r\n\r\n  async create(dto: CreateConsumerDto): Promise<Consumer> {\r\n    const provider = await this.providerRepo.findOne({\r\n      where: { id: dto.issProviderId },\r\n    });\r\n\r\n    if (!provider) {\r\n      throw new NotFoundException(\r\n        `ISS provider with id ${dto.issProviderId} not found`,\r\n      );\r\n    }\r\n\r\n    const { issProviderId, ...rest } = dto;\r\n\r\n    const consumer = this.consumerRepo.create({\r\n      ...rest,\r\n      issProvider: provider,\r\n    });\r\n\r\n    return this.consumerRepo.save(consumer);\r\n  }\r\n\r\n  /* =========================\r\n   * READ\r\n   * ========================= */\r\n\r\n  async findAll(): Promise<Consumer[]> {\r\n    return this.consumerRepo.find({\r\n      relations: ['issProvider'],\r\n      order: {\r\n        lastName: 'ASC',\r\n        firstName: 'ASC',\r\n      },\r\n    });\r\n  }\r\n\r\n  async findByProvider(issProviderId: number): Promise<Consumer[]> {\r\n    return this.consumerRepo.find({\r\n      where: { issProvider: { id: issProviderId } },\r\n      relations: ['issProvider'],\r\n      order: {\r\n        lastName: 'ASC',\r\n        firstName: 'ASC',\r\n      },\r\n    });\r\n  }\r\n\r\n  async findOne(id: number): Promise<Consumer> {\r\n    const consumer = await this.consumerRepo.findOne({\r\n      where: { id },\r\n      relations: ['issProvider'],\r\n    });\r\n\r\n    if (!consumer) {\r\n      throw new NotFoundException(`Consumer ${id} not found`);\r\n    }\r\n\r\n    return consumer;\r\n  }\r\n\r\n  /* =========================\r\n   * UPDATE\r\n   * ========================= */\r\n\r\n  async update(id: number, dto: UpdateConsumerDto): Promise<Consumer> {\r\n    const consumer = await this.consumerRepo.findOne({\r\n      where: { id },\r\n      relations: ['issProvider'],\r\n    });\r\n\r\n    if (!consumer) {\r\n      throw new NotFoundException(`Consumer ${id} not found`);\r\n    }\r\n\r\n    // If ISS provider is being changed\r\n    if (dto.issProviderId !== undefined) {\r\n      const provider = await this.providerRepo.findOne({\r\n        where: { id: dto.issProviderId },\r\n      });\r\n\r\n      if (!provider) {\r\n        throw new NotFoundException(\r\n          `ISS provider with id ${dto.issProviderId} not found`,\r\n        );\r\n      }\r\n\r\n      consumer.issProvider = provider;\r\n      delete (dto as any).issProviderId;\r\n    }\r\n\r\n    Object.assign(consumer, dto);\r\n    return this.consumerRepo.save(consumer);\r\n  }\r\n}\r\n","/* eslint-disable @nx/enforce-module-boundaries */\r\nimport {\r\n  Body,\r\n  Controller,\r\n  Get,\r\n  Param,\r\n  ParseIntPipe,\r\n  Patch,\r\n  Post,\r\n  Query,\r\n} from '@nestjs/common';\r\nimport { IssService } from './iss.service';\r\n\r\nimport { CreateIssProviderDto } from './dto/create-iss-provider.dto';\r\nimport { CreateIssStaffLogDto } from './dto/create-iss-staff-log.dto';\r\nimport { UpdateIssStaffLogDto } from './dto/update-iss-staff-log.dto';\r\n\r\nimport { CreateConsumerDto } from '../consumers/dto/create-consumer.dto';\r\n\r\nimport { IssStaffLog } from './entities/iss-staff-log.entity';\r\nimport { Consumer } from '../consumers/entities/consumer.entity';\r\n\r\n@Controller({\r\n  path: 'iss',\r\n  version: '1',\r\n})\r\nexport class IssController {\r\n  constructor(private readonly svc: IssService) {}\r\n\r\n  /* =========================\r\n   * PROVIDERS\r\n   * ========================= */\r\n\r\n  @Post('providers')\r\n  createProvider(@Body() dto: CreateIssProviderDto) {\r\n    return this.svc.createProvider(dto);\r\n  }\r\n\r\n  @Get('providers')\r\n  listProviders() {\r\n    return this.svc.findAllProviders();\r\n  }\r\n\r\n  /* =========================\r\n   * CONSUMERS\r\n   * ========================= */\r\n\r\n  @Post('consumers')\r\n  createConsumer(@Body() dto: CreateConsumerDto) {\r\n    return this.svc.createConsumer(dto);\r\n  }\r\n\r\n  @Get('consumers')\r\n  listConsumers(\r\n    @Query('issProviderId', ParseIntPipe) issProviderId: number,\r\n  ) {\r\n    return this.svc.findConsumersByProvider(issProviderId);\r\n  }\r\n\r\n  /* =========================\r\n   * STAFF LOGS (8615)\r\n   * ========================= */\r\n\r\n  @Post('staff-logs')\r\n  createStaffLog(@Body() dto: CreateIssStaffLogDto): Promise<IssStaffLog> {\r\n    return this.svc.createStaffLog(dto);\r\n  }\r\n\r\n  @Get('staff-logs/:consumerId')\r\n  listStaffLogs(\r\n    @Param('consumerId', ParseIntPipe) consumerId: number,\r\n  ): Promise<IssStaffLog[]> {\r\n    return this.svc.findStaffLogsForConsumer(consumerId);\r\n  }\r\n\r\n  //  Update existing staff log\r\n  @Patch('staff-logs/:id')\r\n  updateStaffLog(\r\n    @Param('id', ParseIntPipe) id: number,\r\n    @Body() dto: UpdateIssStaffLogDto,\r\n  ): Promise<IssStaffLog> {\r\n    return this.svc.updateStaffLog(id, dto);\r\n  }\r\n\r\n  /* =========================\r\n   * CONSUMER + LATEST / BY DATE\r\n   * ========================= */\r\n\r\n  // Most recent log (legacy endpoint, still useful)\r\n  @Get('consumer/:id/latest-log')\r\n  getConsumerWithLatestLog(\r\n    @Param('id', ParseIntPipe) id: number,\r\n  ): Promise<{ consumer: Consumer; latestLog: IssStaffLog | null }> {\r\n    return this.svc.getConsumerWithLatestLog(id);\r\n  }\r\n\r\n  //  Latest-or-template for a specific date\r\n  // GET /api/v1/iss/consumer/1/log?date=2025-10-06\r\n  @Get('consumer/:id/log')\r\n  getConsumerLogForDate(\r\n    @Param('id', ParseIntPipe) id: number,\r\n    @Query('date') date?: string,\r\n  ): Promise<{\r\n    consumer: Consumer;\r\n    log: IssStaffLog | null;\r\n    defaultTemplate?: any;\r\n  }> {\r\n    return this.svc.getLogForConsumerAndDate(id, date);\r\n  }\r\n\r\n  /* =========================\r\n   * LIST WEEKS FOR CONSUMER\r\n   * ========================= */\r\n\r\n  // GET /api/v1/iss/consumer/1/weeks?page=1&limit=52\r\n  @Get('consumer/:id/weeks')\r\n  listWeeksForConsumer(\r\n    @Param('id', ParseIntPipe) id: number,\r\n    @Query('page') pageRaw?: string,\r\n    @Query('limit') limitRaw?: string,\r\n  ) {\r\n    const page = pageRaw ? parseInt(pageRaw, 10) || 1 : 1;\r\n    const limit = limitRaw ? parseInt(limitRaw, 10) || 52 : 52;\r\n\r\n    return this.svc.listWeeksForConsumer(id, page, limit);\r\n  }\r\n}\r\n","import { IsNotEmpty, IsString } from 'class-validator';\r\n\r\nexport class CreateIssProviderDto {\r\n  @IsString()\r\n  @IsNotEmpty()\r\n  name: string;\r\n\r\n  @IsString()\r\n  @IsNotEmpty()\r\n  licenseNumber: string;\r\n}\r\n","module.exports = require(\"class-validator\");","import {\r\n  IsArray,\r\n  IsDateString,\r\n  IsInt,\r\n  IsNotEmpty,\r\n  IsObject,\r\n  IsOptional,\r\n  IsPositive,\r\n} from 'class-validator';\r\n\r\nexport class CreateIssStaffLogDto {\r\n  @IsInt()\r\n  @IsPositive()\r\n  consumerId!: number;\r\n\r\n  @IsDateString()\r\n  serviceDate!: string; // ISO date string \"YYYY-MM-DD\"\r\n\r\n  /**\r\n   * Top header block from the form:\r\n   * {\r\n   *   individualName: string;\r\n   *   date: string;\r\n   *   lon: string;\r\n   *   provider: string;\r\n   *   license: string;\r\n   *   staffNameTitle: string;\r\n   * }\r\n   */\r\n  @IsObject()\r\n  @IsNotEmpty()\r\n  header!: Record<string, unknown>;\r\n\r\n  /**\r\n   * MF service rows from the form:\r\n   * Array of objects like:\r\n   * {\r\n   *   day: string;\r\n   *   date: string;\r\n   *   providerName: string;\r\n   *   providerSignature: string;\r\n   *   start: string;\r\n   *   end: string;\r\n   *   minutes: number;\r\n   *   setting: 'on_site' | 'off_site';\r\n   *   individualsCount?: number;\r\n   *   staffCount?: number;\r\n   * }\r\n   */\r\n  @IsArray()\r\n  @IsNotEmpty()\r\n  serviceWeek!: Array<Record<string, unknown>>;\r\n\r\n  /**\r\n   * Weekly initials sections:\r\n   * {\r\n   *   socialization: Array<...>;\r\n   *   selfHelp: Array<...>;\r\n   *   adaptive: Array<...>;\r\n   *   implementation: Array<...>;\r\n   *   community: Array<...>;\r\n   * }\r\n   */\r\n  @IsObject()\r\n  @IsNotEmpty()\r\n  weeklySections!: Record<string, unknown>;\r\n\r\n  /**\r\n   * Notes rows:\r\n   * Array of { date: string; initials: string; comment: string }\r\n   */\r\n  @IsArray()\r\n  @IsOptional()\r\n  notes?: Array<Record<string, unknown>>;\r\n}\r\n","import { PartialType } from '@nestjs/mapped-types';\r\nimport { CreateIssStaffLogDto } from './create-iss-staff-log.dto';\r\n\r\nexport class UpdateIssStaffLogDto extends PartialType(CreateIssStaffLogDto) {}\r\n","module.exports = require(\"@nestjs/mapped-types\");","import {\r\n  IsInt,\r\n  IsNotEmpty,\r\n  IsOptional,\r\n  IsPositive,\r\n  IsString,\r\n  IsDateString,\r\n  MaxLength,\r\n} from 'class-validator';\r\n\r\nexport class CreateConsumerDto {\r\n  @IsString()\r\n  @IsNotEmpty()\r\n  @MaxLength(100)\r\n  firstName!: string;\r\n\r\n  @IsString()\r\n  @IsNotEmpty()\r\n  @MaxLength(100)\r\n  lastName!: string;\r\n\r\n  @IsOptional()\r\n  @IsDateString()\r\n  dateOfBirth?: string; // maps to DATE in entity\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  @MaxLength(64)\r\n  medicaidNumber?: string;\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  @MaxLength(32)\r\n  levelOfNeed?: string; // e.g. \"5\"\r\n\r\n  @IsOptional()\r\n  @IsString()\r\n  @MaxLength(32)\r\n  placeOfService?: string; // e.g. \"OFF_SITE\"\r\n\r\n  @IsInt()\r\n  @IsPositive()\r\n  issProviderId!: number;\r\n}\r\n","/* eslint-disable @nx/enforce-module-boundaries */\r\nimport { Module } from '@nestjs/common';\r\nimport { TypeOrmModule } from '@nestjs/typeorm';\r\n\r\nimport { Consumer } from './entities/consumer.entity';\r\nimport { ConsumersService } from './consumers.service';\r\nimport { ConsumersController } from './consumers.controller';\r\nimport { IssProvider } from '../iss/entities/iss-provider.entity'; //  adjust path if needed\r\n\r\n@Module({\r\n  imports: [\r\n    //  Register both repositories used in ConsumersService\r\n    TypeOrmModule.forFeature([Consumer, IssProvider]),\r\n  ],\r\n  providers: [ConsumersService],\r\n  controllers: [ConsumersController],\r\n  exports: [ConsumersService], // so IssModule can inject it\r\n})\r\nexport class ConsumersModule {}\r\n","/* eslint-disable @nx/enforce-module-boundaries */\r\nimport {\r\n  Body,\r\n  Controller,\r\n  Get,\r\n  Param,\r\n  ParseIntPipe,\r\n  Patch,\r\n  Post,\r\n  Query,\r\n} from '@nestjs/common';\r\n\r\nimport { ConsumersService } from './consumers.service';\r\nimport { CreateConsumerDto } from './dto/create-consumer.dto';\r\nimport { UpdateConsumerDto } from './dto/update-consumer.dto';\r\nimport { Consumer } from './entities/consumer.entity';\r\n\r\n@Controller({\r\n  path: 'consumers',\r\n  version: '1',\r\n})\r\nexport class ConsumersController {\r\n  constructor(private readonly consumersService: ConsumersService) {}\r\n\r\n  /**\r\n   * POST /api/v1/consumers\r\n   * Create a new consumer associated to an ISS provider.\r\n   */\r\n  @Post()\r\n  create(@Body() dto: CreateConsumerDto): Promise<Consumer> {\r\n    return this.consumersService.create(dto);\r\n  }\r\n\r\n  /**\r\n   * GET /api/v1/consumers\r\n   * Optional: ?issProviderId=1 to filter by provider.\r\n   */\r\n  @Get()\r\n  findAll(\r\n    @Query('issProviderId') issProviderId?: string,\r\n  ): Promise<Consumer[]> {\r\n    if (issProviderId) {\r\n      return this.consumersService.findByProvider(Number(issProviderId));\r\n    }\r\n    return this.consumersService.findAll();\r\n  }\r\n\r\n  /**\r\n   * GET /api/v1/consumers/:id\r\n   * Fetch a single consumer by id.\r\n   */\r\n  @Get(':id')\r\n  findOne(@Param('id', ParseIntPipe) id: number): Promise<Consumer> {\r\n    return this.consumersService.findOne(id);\r\n  }\r\n\r\n  /**\r\n   * PATCH /api/v1/consumers/:id\r\n   * Update consumer demographics / metadata.\r\n   */\r\n  @Patch(':id')\r\n  update(\r\n    @Param('id', ParseIntPipe) id: number,\r\n    @Body() dto: UpdateConsumerDto,\r\n  ): Promise<Consumer> {\r\n    return this.consumersService.update(id, dto);\r\n  }\r\n}\r\n","import { PartialType } from '@nestjs/mapped-types';\r\nimport { CreateConsumerDto } from './create-consumer.dto';\r\n\r\nexport class UpdateConsumerDto extends PartialType(CreateConsumerDto) {}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// api/src/main.ts\r\nimport {\r\n  Logger,\r\n  ValidationPipe,\r\n  VersioningType,\r\n  ClassSerializerInterceptor,\r\n} from '@nestjs/common';\r\nimport { NestFactory, Reflector } from '@nestjs/core';\r\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger';\r\nimport { NestExpressApplication } from '@nestjs/platform-express';\r\nimport helmet from 'helmet';\r\nimport compression from 'compression';\r\nimport cookieParser from 'cookie-parser';\r\nimport { AppModule } from './app/app.module';\r\n\r\nfunction parseOrigins(csv?: string): string[] {\r\n  return (csv ?? '')\r\n    .split(',')\r\n    .map((s) => s.trim())\r\n    .filter(Boolean);\r\n}\r\n\r\nasync function bootstrap() {\r\n  try {\r\n    const app = await NestFactory.create<NestExpressApplication>(AppModule, {\r\n      bufferLogs: true,\r\n    });\r\n\r\n    app.set('trust proxy', 1);\r\n\r\n    const globalPrefix = process.env.API_PREFIX || 'api';\r\n    app.setGlobalPrefix(globalPrefix);\r\n    app.enableVersioning({ type: VersioningType.URI, defaultVersion: '1' });\r\n\r\n    app.use(helmet());\r\n    app.use(compression());\r\n    app.use(cookieParser());\r\n\r\n    const allowedOrigins = parseOrigins(process.env.CORS_ORIGIN);\r\n    app.enableCors({\r\n      origin: allowedOrigins.length ? allowedOrigins : false,\r\n      credentials: true,\r\n    });\r\n\r\n    \r\n\r\n    app.useGlobalPipes(\r\n      new ValidationPipe({\r\n        whitelist: true,\r\n        forbidNonWhitelisted: true,\r\n        transform: true,\r\n        transformOptions: { enableImplicitConversion: true },\r\n      }),\r\n    );\r\n    const reflector = app.get(Reflector);\r\n    app.useGlobalInterceptors(new ClassSerializerInterceptor(reflector));\r\n\r\n    const enableSwagger =\r\n      process.env.ENABLE_SWAGGER === 'true' ||\r\n      process.env.NODE_ENV !== 'production';\r\n\r\n    if (enableSwagger) {\r\n      const config = new DocumentBuilder()\r\n        .setTitle('API')\r\n        .setDescription('API documentation')\r\n        .setVersion('1.0')\r\n        .addBearerAuth()\r\n        .addServer(`/${globalPrefix}`)\r\n        .build();\r\n\r\n      const document = SwaggerModule.createDocument(app, config);\r\n      SwaggerModule.setup(`${globalPrefix}/docs`, app, document);\r\n    }\r\n\r\n    app.enableShutdownHooks();\r\n\r\n    const port = Number(process.env.PORT ?? 3000);\r\n    await app.listen(port, '0.0.0.0');\r\n\r\n    Logger.log(` App:  http://localhost:${port}/${globalPrefix}`);\r\n    if (enableSwagger) {\r\n      Logger.log(` Docs: http://localhost:${port}/${globalPrefix}/docs`);\r\n    }\r\n  } catch (err) {\r\n    //  THIS WILL SHOW YOU WHY IT'S CRASHING\r\n    Logger.error(' Nest failed to start', err);\r\n    // Make sure the process exits non-zero\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\nbootstrap();\r\n"],"names":[],"sourceRoot":""}