<!-- libs/features/iss/src/lib/pages/iss-home/iss-home.page.html -->
<section class="iss-home">
  <header class="iss-home__header">
    <div>
      <h1>ISS Daily Logs</h1>
      <p>Select a person to open their year-at-a-glance calendar.</p>
    </div>
  </header>

  <ng-container *ngIf="consumers$ | async as consumers; else loading">
    <section class="iss-home__grid" *ngIf="consumers.length; else empty">
      <article
        class="iss-home__card"
        *ngFor="let c of consumers; trackBy: trackByConsumerId"
        (click)="openConsumer(c)"
        tabindex="0"
        role="button"
      >
        <header class="iss-home__card-header">
          <h2>{{ c.firstName }} {{ c.lastName }}</h2>
          <p class="iss-home__secondary">
            {{ c.medicaidId || 'No Medicaid ID on file' }}
          </p>
        </header>

        <div class="iss-home__meta">
          <span class="iss-home__chip">ISS</span>
          <span class="iss-home__link">
            Open year view →
          </span>
        </div>
      </article>
    </section>
  </ng-container>

  <ng-template #loading>
    <p class="iss-home__status">Loading consumers…</p>
  </ng-template>

  <ng-template #empty>
    <p class="iss-home__status">
      No ISS consumers found yet. Add people in the admin area.
    </p>
  </ng-template>
</section>
