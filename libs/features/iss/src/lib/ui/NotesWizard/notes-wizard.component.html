<form class="wizard box" [formGroup]="form" (ngSubmit)="saveFor(defaultConsumer)">
  <h3>Compliance Comment Wizard</h3>

  <!-- Setting -->
  <label for="ccw-setting">Setting</label>
  <select id="ccw-setting" formControlName="setting">
    <option value="on_site">On-Site</option>
    <option value="off_site">Off-Site</option>
  </select>

  <!-- Location / Activity -->
  <div class="row" style="margin-top:8px">
    <div class="col" style="grid-column: span 6">
      <label for="ccw-location">Location</label>
      <input
        id="ccw-location"
        type="text"
        formControlName="location"
        placeholder="e.g., Sports Bar, Park, Bowling Alley" />
    </div>

    <div class="col" style="grid-column: span 6">
      <label for="ccw-activity">Activity</label>
      <input
        id="ccw-activity"
        type="text"
        formControlName="activity"
        placeholder="e.g., Pro sports viewing" />
    </div>
  </div>

  <!-- Prompts / Behavior -->
  <div class="row" style="margin-top:8px">
    <div class="col" style="grid-column: span 6">
      <label for="ccw-prompts">Prompts Required</label>
      <select id="ccw-prompts" formControlName="prompts">
        <option value="independent">Independent</option>
        <option value="minimal">Minimal</option>
        <option value="moderate">Moderate</option>
        <option value="maximal">Maximal</option>
      </select>
    </div>

    <div class="col" style="grid-column: span 6">
      <label for="ccw-behavior">Behavior Observed</label>
      <select id="ccw-behavior" formControlName="behavior">
        <option value="appropriate">Appropriate</option>
        <option value="redirected">Redirected</option>
        <option value="escalated">Escalated</option>
        <option value="other">Other</option>
      </select>
    </div>
  </div>

  <!-- Goals -->
  <div class="row" style="margin-top:8px" formGroupName="goals">
    <div class="col" style="grid-column: span 12">
      <div id="ccw-goals-label" class="label">Goals Addressed</div>

      <div class="grid" style="grid-template-columns: repeat(2, 1fr)">
        <div class="check">
          <input id="ccw-goal-communityIntegration" type="checkbox" formControlName="communityIntegration" />
          <label for="ccw-goal-communityIntegration">Community Integration</label>
        </div>

        <div class="check">
          <input id="ccw-goal-peerEngagement" type="checkbox" formControlName="peerEngagement" />
          <label for="ccw-goal-peerEngagement">Peer Engagement</label>
        </div>

        <div class="check">
          <input id="ccw-goal-communication" type="checkbox" formControlName="communication" />
          <label for="ccw-goal-communication">Communication</label>
        </div>

        <div class="check">
          <input id="ccw-goal-safety" type="checkbox" formControlName="safety" />
          <label for="ccw-goal-safety">Safety</label>
        </div>
      </div>
    </div>
  </div>

  <!-- Time -->
  <div class="row" style="margin-top:8px">
    <div class="col" style="grid-column: span 6">
      <label for="ccw-start">Start Time</label>
      <input id="ccw-start" type="time" formControlName="start" />
    </div>

    <div class="col" style="grid-column: span 6">
      <label for="ccw-end">End Time</label>
      <input id="ccw-end" type="time" formControlName="end" />
    </div>
  </div>

  <!-- Preview comment -->
  <h4 style="margin-top:12px">Generated Narrative</h4>
  <label for="ccw-narrative" class="sr-only">Generated Narrative</label>
  <textarea id="ccw-narrative" readonly rows="6">{{ comment() }}</textarea>

  <!-- Buttons -->
  <div class="row" style="margin-top:8px; gap:8px">
    <button type="button" (click)="copyNarrative()">Copy Narrative</button>
    <button type="submit">Save Note</button>
  </div>
</form>
